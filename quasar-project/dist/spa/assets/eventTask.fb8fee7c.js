import{_ as w,d as b,j as C,k as c,U as g,p as u,s as l,m as h,Q as D,Y as v,Z as T,t as i,a2 as S,a3 as N}from"./index.8a609466.js";import{N as $,Q as L,t as p,p as k,i as m,a as _}from"./NavigationBar.2bde3d17.js";import{u as M}from"./goalStorage.5d8645bf.js";import"./use-quasar.ec58d98a.js";const B=b({name:"TaskDark",components:{NavigationBar:$,QCalendarTask:L},data(){return{selectedDate:p(),startDate:p(),endDate:p(),store:M(),tasks:[],footerTasks:[{title:"TOTALS"}]}},computed:{parsedTasks(){const e=k(this.startDate),t=k(this.endDate),n=[];for(let a=0;a<this.tasks.length;++a){const o=this.tasks[a];for(let d=0;d<o.logged.length;++d){const r=k(o.logged[d].date);if(m(r,e,t)){n.push(o);break}}}return n}},beforeMount(){const e=new Date,t=e.getFullYear(),n=_(e.getMonth()+1,2);let a=this.store.fetchAllTaskSummary();this.tasks=a,console.log("weeee?",this.tasks);const o=d=>{d.logged.forEach(r=>{const f=r.date.slice(-2);[t,_(n,2),_(f,2)].join("-")})};this.tasks.forEach(d=>{o(d),d.children!==void 0&&d.children.forEach(r=>{o(r)})})},methods:{getLogged(e,t){const n=[];for(let a=0;a<t.length;++a)if(t[a].date===e){n.push({logged:t[a].logged});break}return n},getLoggedSummary(e){let t=0;const n=(a,o)=>e===o.date?a+o.logged:a;for(const a in this.tasks)t+=this.tasks[a].logged.reduce(n,0);return t},sum(e,t,n){const a=(o,d)=>{const r=k(d.date);return m(r,e,t)?o+d.logged:o};return n.logged.reduce(a,0)},getTasks(e,t,n){const a=[];for(let o=0;o<n.logged.length;++o){const d=k(n.logged[o].date);if(m(d,e,t)){a.push(n);break}}return a},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,t){let n=0;const a=(o,d)=>{const r=k(d.date);return m(r,e,t)?o+d.logged:o};for(const o in this.tasks)n+=this.tasks[o].logged.reduce(a,0);return n},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){console.log("onChange",e),this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),Q=e=>(S("data-v-021bffda"),e=e(),N(),e),j={class:"subcontent"},H={class:"row justify-center"},q={style:{display:"flex","max-width":"800px",width:"100%"}},E=Q(()=>l("div",{class:"header ellipsis",style:{"font-weight":"600"}},[l("div",{class:"issue ellipsis"},"Goaly"),l("div",{class:"key"},"Key"),l("div",{class:"logged"},"Logged")],-1)),G={class:"issue ellipsis"},I={class:"key"},P={class:"logged"},U={key:0,class:"logged-time",style:{"font-weight":"800"}},F={key:1,class:"logged-time"},A={class:"summary ellipsis"},V={class:"title ellipsis"},Y={class:"total"},K={class:"logged-time"},O={class:"row justify-center items-center"};function Z(e,t,n,a,o,d){const r=C("navigation-bar"),f=C("q-calendar-task");return c(),g("div",j,[u(r,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),l("div",H,[l("div",q,[u(f,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedDate=s),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":t[1]||(t[1]=s=>e.parsedTasks=s),"model-footer":e.footerTasks,"onUpdate:modelFooter":t[2]||(t[2]=s=>e.footerTasks=s),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":h(({})=>[E]),task:h(({scope:s})=>[(c(!0),g(v,null,T(e.getTasks(s.start,s.end,s.task),y=>(c(),g("div",{key:y.key,class:"header ellipsis"},[l("div",G,i(s.task.title)+" ",1),l("div",I,i(s.task.key),1),l("div",P,i(e.sum(s.start,s.end,s.task)),1)]))),128))]),day:h(({scope:s})=>[(c(!0),g(v,null,T(e.getLogged(s.timestamp.date,s.task.logged),y=>(c(),g(v,{key:y},[s.task.children!==void 0?(c(),g("div",U,i(y.logged),1)):(c(),g("div",F,i(y.logged),1))],64))),128))]),"footer-task":h(({scope:s})=>[l("div",A,[l("div",V,i(s.footer.title),1),l("div",Y,i(e.totals(s.start,s.end)),1)])]),"footer-day":h(({scope:s})=>[l("div",K,i(e.getLoggedSummary(s.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),l("div",O,[u(D,{class:"q-ma-xl",color:"white","text-color":"blue",unelevated:"",to:"/planner/dayCalendar",label:"Schedule","no-caps":""}),u(D,{class:"q-ma-xl",color:"white","text-color":"blue",unelevated:"",to:"/planner/viewGoals",label:"Goals","no-caps":""})])])}var X=w(B,[["render",Z],["__scopeId","data-v-021bffda"]]);export{X as default};
