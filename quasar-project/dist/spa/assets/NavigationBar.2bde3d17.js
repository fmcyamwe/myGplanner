import{a as $e,r as M,c as A,f as tt,h as _,w as te,g as nt,e as Gt,d as Jt,o as Vt,b as pt,T as en,_ as tn,k as nn,U as an,s as rn,p as We,m as Oe,q as xe,Q as Be}from"./index.8a609466.js";const at=/^(\d{4})-(\d{1,2})(-(\d{1,2}))?([^\d]+(\d{1,2}))?(:(\d{1,2}))?(:(\d{1,2}))?(.(\d{1,3}))?$/,un=/(\d\d?)(:(\d\d?)|)(:(\d\d?)|)/,ln=[0,31,28,31,30,31,30,31,31,30,31,30,31],dn=[0,31,29,31,30,31,30,31,31,30,31,30,31],on=28,cn=31,V=12,Ue=1,qe=1,oe=7,he=60,Ie=24,sn=6048e5;function se(){const e=new Date,t=""+(e.getMonth()+1),n=""+e.getDate();return[e.getFullYear(),L(t,2),L(n,2)].join("-")}function Ce(e,t,n){let a=q(e);if(a.day===1||a.weekday===0)for(;!t.includes(a.weekday);)a=Q(a);return a=dt(a,t[0],Ke),a=z(a),n&&(a=fe(a,n,a.hasTime)),a}function _e(e,t,n){let a=q(e);if(Y(a.year,a.month)===a.day||a.weekday===6)for(;!t.includes(a.weekday);)a=Ke(a);return a=dt(a,t[t.length-1],Q),a=z(a),n&&(a=fe(a,n,a.hasTime)),a}function Te(e){const t=q(e);return t.day=qe,z(t),t}function ke(e){const t=q(e);return t.day=Y(t.year,t.month),z(t),t}function Vn(e){switch(Object.prototype.toString.call(e)){case"[object Number]":return e;case"[object String]":{const n=un.exec(e);return n?parseInt(n[1],10)*60+parseInt(n[3]||0,10):!1}case"[object Object]":return typeof e.hour!="number"||typeof e.minute!="number"?!1:e.hour*60+e.minute}return!1}function ze(e){return!!at.exec(e)}function j(e){const t=at.exec(e);return t?{date:e,time:L(parseInt(t[6],10)||0,2)+":"+L(parseInt(t[8],10)||0,2),year:parseInt(t[1],10),month:parseInt(t[2],10),day:parseInt(t[4],10)||1,hour:isNaN(parseInt(t[6],10))?0:parseInt(t[6],10),minute:isNaN(parseInt(t[8],10))?0:parseInt(t[8],10),weekday:0,doy:0,workweek:0,hasDay:!!t[4],hasTime:!0,past:!1,current:!1,future:!1,disabled:!1}:null}function R(e,t){let n=j(e);return n===null?null:(n=z(n),t&&fe(n,t,n.hasTime),n)}function fn(e,t=!1){const n=t?"UTC":"";return z({date:L(e[`get${n}FullYear`](),4)+"-"+L(e[`get${n}Month`]()+1,2)+"-"+L(e[`get${n}Date`](),2),time:L(e[`get${n}Hours`]()||0,2)+":"+L(e[`get${n}Minutes`]()||0,2),year:e[`get${n}FullYear`](),month:e[`get${n}Month`]()+1,day:e[`get${n}Date`](),hour:e[`get${n}Hours`](),minute:e[`get${n}Minutes`](),weekday:0,doy:0,workweek:0,hasDay:!0,hasTime:!0,past:!1,current:!1,future:!1,disabled:!1})}function H(e){return e.year*1e8+e.month*1e6+e.day*1e4}function ie(e){return e.hour*100+e.minute}function pn(e){return H(e)+ie(e)}function ea(e,t,n){const a=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute),d=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute);return n===!0&&d<a?0:d-a}function fe(e,t,n=!1){let a=H(t),d=H(e),o=a===d;return e.hasTime&&n&&o&&(a=ie(t),d=ie(e),o=a===d),e.past=d<a,e.current=o,e.future=d>a,e.currentWeekday=e.weekday===t.weekday,e}function vn(e,t,n){return e.hasTime=!0,e.hour=Math.floor(t/he),e.minute=t%he,e.time=Pe(e),n&&fe(e,n,!0),e}function Ge(e){return e.weekday=ut(e),e}function yn(e){return e.doy=rt(e),e}function hn(e,t,n,a,d){const o=H(e);if(t!==void 0){const u=H(j(t));o<=u&&(e.disabled=!0)}if(e.disabled!==!0&&n!==void 0){const u=H(j(n));o>=u&&(e.disabled=!0)}if(e.disabled!==!0&&Array.isArray(a)&&a.length>0){for(const u in a)if(a[u]===e.weekday){e.disabled=!0;break}}if(e.disabled!==!0&&Array.isArray(d)&&d.length>0){for(const u in d)if(Array.isArray(d[u])&&d[u].length===2){const f=j(d[u][0]),c=j(d[u][1]);if(Tn(e,f,c)){e.disabled=!0;break}}else if(H(R(d[u]+" 00:00"))===o){e.disabled=!0;break}}return e}function z(e){return e.hasTime=!0,e.time=Pe(e),e.date=lt(e),e.weekday=ut(e),e.doy=rt(e),e.workweek=_n(e),e}function rt(e){if(e.year!==0)return(Date.UTC(e.year,e.month-1,e.day)-Date.UTC(e.year,0,0))/24/60/60/1e3}function _n(e){e.year===0&&(e=R(se()));const t=Dn(e);if(isNaN(t))return 0;const n=new Date(t.getFullYear(),t.getMonth(),t.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const a=new Date(n.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const d=n.getTimezoneOffset()-a.getTimezoneOffset();n.setHours(n.getHours()-d);const o=(n-a)/sn;return 1+Math.floor(o)}function ut(e){let t=e.weekday;if(e.hasDay){const n=Math.floor,a=e.day,d=(e.month+9)%V+1,o=n(e.year/100),u=e.year%100-(e.month<=2?1:0);t=((a+n(2.6*d-.2)-2*o+u+n(u/4)+n(o/4))%7+7)%7}return t}function kn(e){return(e%4===0^e%100===0^e%400===0)===1}function Y(e,t){return kn(e)?dn[t]:ln[t]}function q(e){return{...e}}function L(e,t){let n=String(e);for(;n.length<t;)n="0"+n;return n}function lt(e){let t=`${L(e.year,4)}-${L(e.month,2)}`;return e.hasDay&&(t+=`-${L(e.day,2)}`),t}function Pe(e){return e.hasTime?`${L(e.hour,2)}:${L(e.minute,2)}`:""}function gn(e){return lt(e)+" "+(e.hasTime?Pe(e):"00:00")}function Q(e){return++e.day,e.weekday=(e.weekday+1)%oe,e.day>on&&e.day>Y(e.year,e.month)&&(e.day=qe,++e.month,e.month>V&&(e.month=Ue,++e.year)),e}function Ke(e){return e.day--,e.weekday=(e.weekday+6)%oe,e.day<qe&&(e.month--,e.month<Ue&&(e.year--,e.month=V),e.day=Y(e.year,e.month)),e}function Je(e,t=Q,n=1,a=[0,1,2,3,4,5,6]){return ce(e,t,n,a)}function ce(e,t=Q,n=1,a=[0,1,2,3,4,5,6]){for(!a.includes(e.weekday)&&e.weekday===0&&t===Q&&++n;--n>=0;)e=t(e),a.length<7&&!a.includes(e.weekday)&&++n;return e}function dt(e,t,n=Q,a=6){for(;e.weekday!==t&&--a>=0;)e=n(e);return e}function wn(e){const t=[1,1,1,1,1,1,1],n=[0,0,0,0,0,0,0];for(let a=0;a<e.length;++a)n[e[a]]=1;for(let a=0;a<oe;++a){let d=1;for(let o=1;o<oe;++o){const u=(a+o)%oe;if(n[u])break;++d}t[a]=n[a]*d}return t}function bn(e,t,n,a,d,o,u=[],f=[],c=42,g=0){const h=H(t),y=[];let D=q(e),C=0,N=C===h;if(h<H(e))return y;for(;(!N||y.length<g)&&y.length<c&&(C=H(D),N=N||C>h&&y.length>=g,!N);){if(a[D.weekday]===0){D=ce(D,Q);continue}const F=q(D);z(F),fe(F,n),hn(F,d,o,u,f),y.push(F),D=ce(D,Q)}return y}function ta(e,t,n,a,d){const o=[];for(let u=0;u<a;++u){const f=(t+u)*n,c=q(e);o.push(vn(c,f,d))}return o}function Me(e,t){const n=(a,d)=>"";return typeof Intl=="undefined"||typeof Intl.DateTimeFormat=="undefined"?n:(a,d)=>{try{return new Intl.DateTimeFormat(e||void 0,t(a,d)).format(mn(a))}catch(o){return console.error(`Intl.DateTimeFormat: ${o.message} -> ${gn(a)}`),n}}}function Dn(e,t=!0){return t?new Date(Date.UTC(e.year,e.month-1,e.day,0,0)):new Date(e.year,e.month-1,e.day,0,0)}function mn(e,t=!0){return t?new Date(Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute)):new Date(e.year,e.month-1,e.day,e.hour,e.minute)}function Ve(e){return isFinite(parseInt(e,10))}function Tn(e,t,n,a){const d=H(e)+(a===!0?ie(e):0),o=H(t)+(a===!0?ie(t):0),u=H(n)+(a===!0?ie(n):0);return d>=o&&d<=u}function E(e,t){const n=q(e);let a;return qn(t,(d,o)=>{if(n[o]!==void 0){n[o]+=parseInt(d,10);const u=pe.indexOf(o);u!==-1&&(a===void 0?a=u:a=Math.min(u,a))}}),a!==void 0&&Fn(n,pe[a]),z(n),n}const pe=["minute","hour","day","month"];function qn(e,t){Object.keys(e).forEach(n=>t(e[n],n))}function Cn(e){if(e.minute>=he||e.minute<0){const t=Math.floor(e.minute/he);e.minute-=t*he,e.hour+=t,ot(e)}return e}function ot(e){if(e.hour>=Ie||e.hour<0){const t=Math.floor(e.hour/Ie);e.hour-=t*Ie,e.day+=t,it(e)}return e}function it(e){de(e);let t=Y(e.year,e.month);if(e.day>t){++e.month,e.month>V&&de(e);let n=e.day-t;t=Y(e.year,e.month);do n>t&&(++e.month,e.month>V&&de(e),n-=t,t=Y(e.year,e.month));while(n>t);e.day=n}else if(e.day<=0){let n=-1*e.day;--e.month,e.month<=0&&de(e),t=Y(e.year,e.month);do n>t&&(n-=t,--e.month,e.month<=0&&de(e),t=Y(e.year,e.month));while(n>t);e.day=t-n}return e}function de(e){if(e.month>V){const t=Math.floor(e.month/V);e.month=e.month%V,e.year+=t}else e.month<Ue&&(e.month+=V,--e.year);return e}function Fn(e,t){switch(t){case"minute":return Cn(e);case"hour":return ot(e);case"day":return it(e);case"month":return de(e)}}function K(e,t="px"){if(!(e==null||e===""))return isNaN(e)?String(e):e==="auto"?e:`${Number(e)}${t}`}function An(e,t){return t===0?e:e.slice(0,t)}const En=e=>e.replace(/(-\w)/g,t=>t[1].toUpperCase());let Re,ct;function st(e,t){const n={};for(const a in e){const d=e[a],o=En("on-"+a);if(Re===void 0){console.warn("$listeners has not been set up");return}if(Re.value[o]===void 0)continue;const u="on"+d.event.charAt(0).toUpperCase()+d.event.slice(1),f=c=>{const g=c;return(d.button===void 0||g.buttons>0&&g.button===d.button)&&(d.prevent&&g.preventDefault(),d.stop&&g.stopPropagation(),ct(a,t(g,a))),d.result};u in n?Array.isArray(n[u])?n[u].push(f):n[u]=[n[u],f]:n[u]=f}return n}function Hn(e,t){return st(Ye(e),t)}function Ye(e){return{["click"+e]:{event:"click"},["contextmenu"+e]:{event:"contextmenu",prevent:!0,result:!1},["mousedown"+e]:{event:"mousedown"},["mousemove"+e]:{event:"mousemove"},["mouseup"+e]:{event:"mouseup"},["mouseenter"+e]:{event:"mouseenter"},["mouseleave"+e]:{event:"mouseleave"},["touchstart"+e]:{event:"touchstart"},["touchmove"+e]:{event:"touchmove"},["touchend"+e]:{event:"touchend"}}}function me(e){return Object.keys(Ye(e))}function Sn(e,t){return ct=e,Re=t,{getMouseEventHandlers:st,getDefaultMouseEventHandlers:Hn,getMouseEventName:Ye,getRawMouseEvents:me}}var Le={name:"ResizeObserver",mounted(e,{modifiers:t,value:n}){if(!n)return;const a={};a.callback=n,a.size={width:0,height:0},a.observer=new ResizeObserver(d=>{const o=d[0].contentRect;(o.width!==a.size.width||o.height!==a.size.height)&&(a.size.width=o.width,a.size.height=o.height,a.callback(a.size))}),a.observer.observe(e),e.__onResizeObserver=a},beforeUnmount(e){if(!e.__onResizeObserver)return;const{observer:t}=e.__onResizeObserver;t.unobserve(e),delete e.__onResizeObserver}};function Nn(e,t,{scrollArea:n,pane:a}){if(!t){const h="[error: renderCalendar] no renderFunc has been supplied to useCalendar";throw console.error(h),new Error(h)}const d=$e({width:0,height:0}),o=M(null);function u({width:h,height:y}){d.width=h,d.height=y}const f=A(()=>e.noScroll!==!0&&n.value&&a.value&&d.height?n.value.offsetWidth-a.value.offsetWidth:0);function c(){}function g(){const h={ref:o,role:"complementary",lang:e.locale,class:{"q-calendar--dark":e.dark===!0,"q-calendar":!0,"q-calendar__bordered":e.bordered===!0}};return tt(_("div",h,[t()]),[[Le,u]])}return{rootRef:o,scrollWidth:f,__initCalendar:c,__renderCalendar:g}}const na={modelValue:{type:String,default:se(),validator:e=>e===""||ze(e)},weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},dateType:{type:String,default:"round",validator:e=>["round","rounded","square"].includes(e)},weekdayAlign:{type:String,default:"center",validator:e=>["left","center","right"].includes(e)},dateAlign:{type:String,default:"center",validator:e=>["left","center","right"].includes(e)},bordered:Boolean,dark:Boolean,noAria:Boolean,noActiveDate:Boolean,noHeader:Boolean,noScroll:Boolean,shortWeekdayLabel:Boolean,noDefaultHeaderText:Boolean,noDefaultHeaderBtn:Boolean,minWeekdayLabel:{type:[Number,String],default:1},weekdayBreakpoints:{type:Array,default:()=>[75,35],validator:e=>e.length===2},locale:{type:String,default:"en-US"},animated:Boolean,transitionPrev:{type:String,default:"slide-right"},transitionNext:{type:String,default:"slide-left"},disabledDays:Array,disabledBefore:String,disabledAfter:String,disabledWeekdays:{type:Array,default:()=>[]},dragEnterFunc:{type:Function},dragOverFunc:{type:Function},dragLeaveFunc:{type:Function},dropFunc:{type:Function},selectedDates:{type:Array,default:()=>[]},selectedStartEndDates:{type:Array,default:()=>[]},hoverable:Boolean,focusable:Boolean,focusType:{type:Array,default:["date"],validator:e=>{let t=!0;return e.forEach(n=>{["day","date","weekday","interval","time","resource","task"].includes(n)!==!0&&(t=!1)}),t}}};function Wn(e,{startDate:t,endDate:n,times:a}){const d=A(()=>wn(e.weekdays)),o=A(()=>R(t.value)),u=A(()=>n.value==="0000-00-00"?N(o.value):R(n.value)),f=A(()=>{const w={timeZone:"UTC",day:"numeric"};return Me(e.locale,(W,I)=>w)}),c=A(()=>{const w={timeZone:"UTC",weekday:"long"},W={timeZone:"UTC",weekday:"short"};return Me(e.locale,(I,$)=>$?W:w)}),g=A(()=>{const w={timeZone:"UTC",dateStyle:"full"};return Me(e.locale,W=>w)});function h(w,W){return w&&w.length>0&&w.includes(W.date)}function y(w,W){const I={firstDay:!1,betweenDays:!1,lastDay:!1};if(w&&w.length===2){const $=H(W),X=H(j(w[0])),x=H(j(w[1]));I.firstDay=X===$,I.lastDay=x===$,I.betweenDays=X<$&&x>$}return I}function D(w,W=!1,I=[],$=[],X=!1){const x=h(I,w),{firstDay:p,lastDay:G,betweenDays:Z}=y($,w);return{"q-past-day":p!==!0&&Z!==!0&&G!==!0&&x!==!0&&W!==!0&&w.past,"q-future-day":p!==!0&&Z!==!0&&G!==!0&&x!==!0&&W!==!0&&w.future,"q-outside":W,"q-current-day":w.current,"q-selected":x,"q-range-first":p===!0,"q-range":Z===!0,"q-range-last":G===!0,"q-range-hover":X===!0&&(p===!0||G===!0||Z===!0),"q-disabled-day disabled":w.disabled===!0}}function C(w){return Ce(w,e.weekdays,a.today)}function N(w){return _e(w,e.weekdays,a.today)}function F(w){}return{weekdaySkips:d,parsedStart:o,parsedEnd:u,dayFormatter:f,weekdayFormatter:c,ariaDateFormatter:g,arrayHasDate:h,checkDays:y,getRelativeClasses:D,startOfWeek:C,endOfWeek:N,dayStyleDefault:F}}const On={modelValue:{type:String,default:se(),validator:e=>e===""||ze(e)},modelTasks:{type:Array,default:[]},modelTitle:{type:Array,default:[]},modelFooter:{type:Array,default:[]},taskKey:{type:[String,Number],default:"id"},weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},dateType:{type:String,default:"round",validator:e=>["round","rounded","square"].includes(e)},dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)},weekdayAlign:{type:String,default:"center",validator:e=>["left","center","right"].includes(e)},dateAlign:{type:String,default:"center",validator:e=>["left","center","right"].includes(e)},view:{type:String,validator:e=>["day","week","month"].includes(e)},viewCount:{type:Number,default:1,validator:e=>Ve(e)&&e>0},bordered:Boolean,dark:Boolean,noAria:Boolean,noActiveDate:Boolean,shortWeekdayLabel:Boolean,noHeader:Boolean,noDefaultHeaderText:Boolean,noDefaultHeaderBtn:Boolean,cellWidth:[Number,String],minWeekdayLabel:{type:[Number,String],default:2},weekdayBreakpoints:{type:Array,default:()=>[75,35],validator:e=>e.length===2},locale:{type:String,default:"en-US"},animated:Boolean,transitionPrev:{type:String,default:"slide-right"},transitionNext:{type:String,default:"slide-left"},disabledDays:Array,disabledBefore:String,disabledAfter:String,disabledWeekdays:{type:Array,default:()=>[]},weekdayClass:Function,dayClass:Function,footerDayClass:Function,dragEnterFunc:{type:Function},dragOverFunc:{type:Function},dragLeaveFunc:{type:Function},dropFunc:{type:Function},hoverable:Boolean,focusable:Boolean,focusType:{type:Array,default:["date"],validator:e=>{let t=!0;return e.forEach(n=>{["day","date","weekday","interval","resource","task"].includes(n)!==!0&&(t=!1)}),t}},taskWidth:{type:Number,default:200,validator:e=>Ve(e)&&e>0}};function xn(e,t,{weekdaySkips:n,times:a}){const d=A(()=>{if(e.view==="day")return R(e.modelValue);if(e.view==="week")return Ce(R(e.modelValue),e.weekdays,a.today);if(e.view==="month")return Te(R(e.modelValue),e.weekdays,a.today);throw new Error(`QCalendarTask: unknown 'view' type (${e.view})`)}),o=A(()=>{if(e.view==="day"){if(e.viewCount===1)return d.value;let f=q(d.value);return f=E(f,{day:e.viewCount-1}),f}else if(e.view==="week"){if(e.viewCount===1)return _e(R(e.modelValue),e.weekdays,a.today);{let f=q(d.value);return f=E(f,{day:(e.viewCount-1)*oe}),_e(f,e.weekdays,a.today)}}else if(e.view==="month"){if(e.viewCount===1)return ke(R(e.modelValue),e.weekdays,a.today);{let f=q(d.value);return f=E(f,{month:e.viewCount}),ke(f,e.weekdays,a.today)}}else throw new Error(`QCalendarTask: unknown 'view' type (${e.view})`)});return{days:A(()=>bn(d.value,o.value,a.today,n.value,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,Number.MAX_SAFE_INTEGER)),parsedStartDate:d,parsedEndDate:o}}const Bn={now:{type:String,validator:e=>e===""||ze(e),default:""}};function In(e){const t=$e({now:R("0000-00-00 00:00"),today:R("0000-00-00")}),n=A(()=>e.now?R(e.now):o());te(()=>n,c=>d());function a(){t.now.current=t.today.current=!0,t.now.past=t.today.past=!1,t.now.future=t.today.future=!1}function d(){const c=n.value||o();u(c,t.now),f(c,t.now),u(c,t.today)}function o(){return fn(new Date)}function u(c,g){c.date!==g.date&&(g.year=c.year,g.month=c.month,g.day=c.day,g.weekday=c.weekday,g.date=c.date)}function f(c,g){c.time!==g.time&&(g.hour=c.hour,g.minute=c.minute,g.time=c.time)}return{times:t,parsedNow:n,setCurrent:a,updateCurrent:d,getNow:o,updateDay:u,updateTime:f}}function Mn(e,{parsedView:t,parsedValue:n,times:a}){return{renderValues:A(()=>{const o=n.value;let u=e.maxDays,f=o,c=o;switch(t.value){case"month":f=Te(o),c=ke(o),u=Y(f.year,f.month);break;case"week":case"week-agenda":case"week-scheduler":f=Ce(o,e.weekdays,a.today),c=_e(f,e.weekdays,a.today),u=e.weekdays.length;break;case"day":case"scheduler":case"agenda":c=Je(q(c),Q,u>1?u-1:u,e.weekdays),z(c);break;case"month-interval":case"month-scheduler":case"month-agenda":f=Te(o),c=ke(o),z(c),u=Y(f.year,f.month);break;case"resource":u=1,c=Je(q(c),Q,u,e.weekdays),z(c);break}return{start:f,end:c,maxDays:u}})}}const Rn=["moved"];function Ln(e,{parsedView:t,parsedValue:n,weekdaySkips:a,direction:d,maxDays:o,times:u,emittedValue:f,emit:c}){function g(h=1){if(h===0){f.value=se();return}let y=q(n.value);const D=h>0,C=D?Q:Ke,N=D?cn:qe;let F=D?h:-h;d.value=D?"next":"prev";const w=a.value.filter(W=>W!==0).length;for(;--F>=0;)switch(t.value){case"month":for(y.day=N,C(y),Ge(y);a.value[y.weekday]===0;)y=E(y,{day:D===!0?1:-1});break;case"week":case"week-agenda":case"week-scheduler":ce(y,C,w,e.weekdays);break;case"day":case"scheduler":case"agenda":ce(y,C,o.value,e.weekdays);break;case"month-interval":case"month-agenda":case"month-scheduler":y.day=N,C(y);break;case"resource":ce(y,C,o.value,e.weekdays);break}Ge(y),z(y),yn(y),fe(y,u.now),f.value=y.date,c("moved",y)}return{move:g}}const $n=/^on[A-Z]/;function Un(e=nt()){return{emitListeners:A(()=>{const t={};return e.vnode!==void 0&&e.vnode!==null&&e.vnode.props!==null&&Object.keys(e.vnode.props).forEach(n=>{$n.test(n)===!0&&(t[n]=!0)}),t})}}function ye(){return[_("span",{ariaHidden:"true",class:"q-calendar__focus-helper"})]}function zn(e,t,n){const a=e.focusable===!0&&e.focusType.includes("date")===!0;return t.tabindex=a===!0?0:-1,_("button",t,[n,a===!0&&ye()])}const Pn=["change"];function Kn(e,{days:t,lastStart:n,lastEnd:a}){function d(){if(t.value&&t.value.length>0){const o=t.value[0].date,u=t.value[t.value.length-1].date;if(n.value===null||a.value===null||o!==n.value||u!==a.value)return n.value=o,a.value=u,e("change",{start:o,end:u,days:t.value}),!0}return!1}return{checkChange:d}}function ft(){function e(n,{bubbles:a=!1,cancelable:d=!1}={}){try{return new CustomEvent(n,{bubbles:a,cancelable:d})}catch{const u=document.createEvent("Event");return u.initEvent(n,a,d),u}}function t(n,a){return[].concat(a).includes(n.keyCode)}return{createEvent:e,isKeyCode:t}}const{isKeyCode:et}=ft(),Yn={useNavigation:Boolean};function jn(e,{rootRef:t,focusRef:n,focusValue:a,datesRef:d,days:o,parsedView:u,parsedValue:f,emittedValue:c,weekdaySkips:g,direction:h,times:y}){let D=!1;Gt(()=>{N()}),te(()=>e.useNavigation,m=>{m===!0?C():N()}),e.useNavigation===!0&&C();function C(){D!==!0&&document&&(D=!0,document.addEventListener("keyup",I),document.addEventListener("keydown",W))}function N(){document&&(document.removeEventListener("keyup",I),document.removeEventListener("keydown",W),D=!1)}function F(m){if(m===void 0)return!1;if(document){const l=document.activeElement;if(l!==document.body&&t.value.contains(l)===!0)return!0}return!1}function w(){let m=0;const l=setInterval(()=>{d.value[n.value]?(d.value[n.value].focus(),(++m===50||document.activeElement===d.value[n.value])&&clearInterval(l)):clearInterval(l)},250)}function W(m){F(m)&&et(m,[33,34,35,36,37,38,39,40])&&(m.stopPropagation(),m.preventDefault())}function I(m){if(F(m)&&et(m,[33,34,35,36,37,38,39,40]))switch(m.keyCode){case 33:G();break;case 34:Z();break;case 35:Ae();break;case 36:Fe();break;case 37:x();break;case 38:$();break;case 39:p();break;case 40:X();break}}function $(m){let l=q(a.value);if(u.value==="month"){if(l=E(l,{day:-7}),a.value.month!==l.month){h.value="prev",c.value=l.date;return}}else(u.value==="day"||u.value==="week"||u.value==="month-interval")&&(l=E(l,{minute:parseInt(e.intervalMinutes)}));h.value="prev",n.value=l.date}function X(m){let l=q(a.value);if(u.value==="month"){if(l=E(l,{day:7}),a.value.month!==l.month){h.value="next",c.value=l.date;return}}else(u.value==="day"||u.value==="week"||u.value==="month-interval")&&(l=E(l,{minute:parseInt(e.intervalMinutes)}));h.value="next",n.value=l.date}function x(m){let l=q(a.value);h.value="prev";do l=E(l,{day:-1});while(g.value[l.weekday]===0);if(u.value==="month"||u.value==="month-interval"){if(a.value.month!==l.month){c.value=l.date;return}}else if(u.value==="week"){if(l.weekday>a.value.weekday){c.value=l.date;return}}else if(u.value==="day"){c.value=l.date;return}n.value=l.date}function p(m){let l=q(a.value);h.value="next";do l=E(l,{day:1});while(g.value[l.weekday]===0);if(u.value==="month"||u.value==="month-interval"){if(a.value.month!==l.month){c.value=l.date;return}}else if(u.value==="week"){if(l.weekday<a.value.weekday){c.value=l.date;return}}else if(u.value==="day"){c.value=l.date;return}n.value=l.date}function G(m){let l=q(a.value);if(u.value==="month"||u.value==="month-interval"){l=E(l,{month:-1});const ue=l.day<=15?1:-1;for(;g.value[l.weekday]===0;)l=E(l,{day:ue})}else u.value==="day"?l=E(l,{day:-1}):u.value==="week"&&(l=E(l,{day:-7}));h.value="prev",n.value=l.date}function Z(m){let l=q(a.value);if(u.value==="month"||u.value==="month-interval"){l=E(l,{month:1});const ue=l.day<=15?1:-1;for(;g.value[l.weekday]===0;)l=E(l,{day:ue})}else u.value==="day"?l=E(l,{day:1}):u.value==="week"&&(l=E(l,{day:7}));h.value="next",n.value=l.date}function Fe(m){let l=q(a.value);for(u.value==="month"||u.value==="month-interval"?l=Te(l):u.value==="week"&&(l=Ce(l,e.weekdays,y.today));g.value[l.weekday]===0;)l=E(l,{day:-1});n.value=l.date}function Ae(m){let l=q(a.value);for(u.value==="month"||u.value==="month-interval"?l=ke(l):u.value==="week"&&(l=_e(l,e.weekdays,y.today));g.value[l.weekday]===0;)l=E(l,{day:-1});n.value=l.date}return{startNavigation:C,endNavigation:N,tryFocus:w}}var aa=Jt({name:"QCalendarTask",directives:[Le],props:{...Bn,...Yn,...On},emits:["update:model-value","update:model-tasks","update:model-title","update:model-footer","task-expanded",...Pn,...Rn,...me("-date"),...me("-day"),...me("-head-day")],setup(e,{slots:t,emit:n,expose:a}){const d=M(null),o=M(null),u=M("next"),f=M(e.modelValue||se()),c=M("0000-00-00"),g=M(0),h=M(e.modelValue),y=M(null),D=M(null),C=M({}),N=$e({width:0,height:0}),F=M(!1),w=M(null),W=M(null);te(()=>e.view,()=>{g.value=0});const I=A(()=>e.view==="month"?"month-interval":e.view),$=nt();if($===null)throw new Error("current instance is null");const{emitListeners:X}=Un($),{times:x,setCurrent:p,updateCurrent:G}=In(e);G(),p();const{weekdaySkips:Z,parsedStart:Fe,dayFormatter:Ae,weekdayFormatter:m,ariaDateFormatter:l,dayStyleDefault:ue,getRelativeClasses:ge}=Wn(e,{startDate:f,endDate:c,times:x}),le=A(()=>R(e.modelValue,x.now)||Fe.value||x.today);D.value=le.value,y.value=le.value.date;const{renderValues:vt}=Mn(e,{parsedView:I,times:x,parsedValue:le}),{rootRef:yt,__initCalendar:ht,__renderCalendar:_t}=Nn(e,Xt,{scrollArea:d,pane:o}),{days:J,parsedStartDate:we,parsedEndDate:be}=xn(e,n,{weekdaySkips:Z,times:x}),{move:Ee}=Ln(e,{parsedView:I,parsedValue:le,weekdaySkips:Z,direction:u,maxDays:g,times:x,emittedValue:h,emit:n}),{getDefaultMouseEventHandlers:He}=Sn(n,X),{checkChange:kt}=Kn(n,{days:J,lastStart:w,lastEnd:W}),{isKeyCode:De}=ft(),{tryFocus:gt}=jn(e,{rootRef:yt,focusRef:y,focusValue:D,datesRef:C,days:J,parsedView:I,parsedValue:le,emittedValue:h,weekdaySkips:Z,direction:u,times:x}),ne=M(!0),ee=A(()=>e.cellWidth!==void 0?parseInt(e.cellWidth,10):150),ve=A(()=>e.focusable===!0&&e.focusType.includes("day")&&isMiniMode.value!==!0),je=A(()=>e.focusable===!0&&e.focusType.includes("date")&&ve.value!==!0),Se=A(()=>e.focusable===!0&&e.focusType.includes("weekday")),Qe=A(()=>parseInt(e.dayHeight,10)),Ze=A(()=>parseInt(e.dayMinHeight,10));te([J],kt,{deep:!0,immediate:!0}),te(()=>e.modelValue,(r,i)=>{if(h.value!==r){if(e.animated===!0){const s=H(j(r)),v=H(j(i));u.value=s>=v?"next":"prev"}h.value=r}y.value=r}),te(h,(r,i)=>{if(h.value!==e.modelValue){if(e.animated===!0){const s=H(j(r)),v=H(j(i));u.value=s>=v?"next":"prev"}n("update:model-value",r)}}),te(y,r=>{r&&(D.value=R(r))}),te(D,r=>{C.value[y.value]?C.value[y.value].focus():gt()}),Vt(()=>{C.value={}}),pt(()=>{ht()});function wt(){h.value=se()}function bt(r=1){Ee(r)}function Dt(r=1){Ee(-r)}function mt({width:r,height:i}){N.width=r,N.height=i}function Ne(r){return r.date===h.value}function Tt(r,i,s){const v=t.day,k=e.dayStyle||ue,b=e.noActiveDate!==!0&&le.value.date===r.date,T={timestamp:r,task:i,taskIndex:s,activeDate:b},S=K(ee.value),B={width:S,minWidth:S,maxWidth:S,...k({scope:T})},P=typeof e.dayClass=="function"?e.dayClass({scope:T}):{};return _("div",{tabindex:ve.value===!0?0:-1,class:{"q-calendar-task__task--day":!0,...P,...ge(r),"q-active-date":b===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":ve.value===!0},style:B,onFocus:U=>{ve.value},...He("-day",U=>({scope:T,event:U})),onDragenter:U=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(U,"day",T)===!0?dragOverResource.value=dragValue:dragOverResource.value="")},onDragover:U=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(U,"day",T)===!0?dragOverResource.value=dragValue:dragOverResource.value="")},onDragleave:U=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(U,"day",T)===!0?dragOverResource.value=dragValue:dragOverResource.value="")},onDrop:U=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(U,"day",T)===!0?dragOverResource.value=dragValue:dragOverResource.value="")}},[v&&v({scope:T}),ye()])}function qt(r,i){return J.value.map(s=>Tt(s,r,i))}function Ct(r,i){const s=t.days,v={timestamps:J.value,days:J.value,task:r,taskIndex:i,cellWidth:ee.value};return _("div",{class:"q-calendar-task__task--days-row"},[qt(r,i),s&&s({scope:v})])}function Ft(r,i,s=0,v=!0){const k=t.task,b={start:we.value,end:be.value,task:r,taskIndex:i,expanded:v},T=K(e.taskWidth),S={width:T,minWidth:T,maxWidth:T},B=e.focusable===!0&&e.focusType.includes("task");return _("div",{class:{"q-calendar-task__task--item":!0,"q-calendar__sticky":ne.value===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":B===!0},style:S},[_("div",{style:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:10+10*s+"px"}},[_("div",{class:{"q-calendar__parent":r.children!==void 0,"q-calendar__parent--expanded":r.children!==void 0&&r.expanded===!0,"q-calendar__parent--collapsed":r.children!==void 0&&r.expanded!==!0},onClick:P=>{P.stopPropagation(),r.expanded=!r.expanded,n("task-expanded",{expanded:r.expanded,scope:b})}})]),k&&k({scope:b}),ye()])}function At(r,i,s=0,v=!0){const k=r.height!==void 0?K(parseInt(r.height,10)):Qe.value>0?K(Qe.value):"auto",b=Ze.value>0?K(Ze.value):void 0,T={height:k};b!==void 0&&(T.minHeight=b);const S=_("div",{key:r[e.taskKey]+"-"+i,class:{"q-calendar-task__task":s===0,"q-calendar-task__task--section":s!==0},style:T},[Ft(r,i,s,v),Ct(r,i)]);return r.children!==void 0?[S,_("div",{class:{"q-calendar__child":!0,"q-calendar__child--expanded":v===!0,"q-calendar__child--collapsed":v!==!0}},[Xe(r.children,s+1,v===!1?v:r.expanded)])]:[S]}function Xe(r=void 0,i=0,s=!0){return r===void 0&&(r=e.modelTasks),r.map((v,k)=>At(v,k,i,v.children!==void 0?v.expanded:s))}function Et(){return _("div",{class:{"q-calendar-task__task--container":!0,"q-calendar__sticky":ne.value===!0}},[Xe()])}function Ht(r,i){const s=t["footer-task"],v={start:we.value,end:be.value,footer:r,index:i},k=K(e.taskWidth),b={width:k,minWidth:k,maxWidth:k};return _("div",{class:{"q-calendar-task__footer--task":!0,"q-calendar__sticky":ne.value===!0},style:b},[s&&s({scope:v})])}function St(r,i,s){const v=t["footer-day"],k={timestamp:r,footer:i,index:s},b=K(ee.value),T={width:b,minWidth:b,maxWidth:b},S=typeof e.footerDayClass=="function"?e.footerDayClass({scope:k}):{};return _("div",{class:{"q-calendar-task__footer--day":!0,...S,...ge(r),"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":ve.value===!0},style:T},[v&&v({scope:k})])}function Nt(r,i){return _("div",{class:"q-calendar-task__footer--day-wrapper"},[J.value.map(s=>St(s,r,i))])}function Wt(){const r=e.focusable===!0&&e.focusType.includes("task");return e.modelFooter.map((i,s)=>_("div",{class:{"q-calendar-task__footer--wrapper":!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":r===!0}},{default:()=>[Ht(i,s),Nt(i,s)]}))}function Ot(){return _("div",{class:{"q-calendar-task__footer":!0,"q-calendar__sticky":ne.value===!0}},Wt())}function xt(){return _("div",{class:{"q-calendar-task__container":!0}},[e.noHeader!==!0&&jt(),Et(),Ot()])}function Bt(){const r=t["head-tasks"],i={start:we.value,end:be.value},s=K(parseInt(e.taskWidth,10)),v={width:s,minWidth:s,maxWidth:s};return _("div",{class:{"q-calendar-task__head--tasks":!0,"q-calendar__sticky":ne.value===!0},style:v},[r&&r({scope:i})])}function It(r,i){const s=t["title-task"],v=K(parseInt(e.taskWidth,10)),k={width:v,minWidth:v,maxWidth:v},b={start:we.value,end:be.value,cellWidth:v,title:r,index:i};return _("div",{class:{"q-calendar-task__title--task":!0,"q-calendar__sticky":ne.value===!0},style:k},[s&&s({scope:b})])}function ae(r){const i=t["head-weekday-label"],v={activeDate:e.noActiveDate!==!0&&Ne(r),timestamp:r,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1},k={class:{"q-calendar-task__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return _("div",k,i&&i({scope:v})||Mt(r,e.shortWeekdayLabel))}function Mt(r,i){const s=m.value(r,i||e.weekdayBreakpoints[0]>0&&ee.value<=e.weekdayBreakpoints[0]);return _("span",{class:"q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&ee.value<=e.weekdayBreakpoints[1]?An(s,e.minWeekdayLabel):s)}function re(r){const i={class:{"q-calendar-task__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return _("div",i,Rt(r))}function Rt(r){const i=e.noActiveDate!==!0&&Ne(r),s=Ae.value(r,!1),v=t["head-day-label"],k=t["head-day-button"],b={dayLabel:s,timestamp:r,activeDate:i},S={key:r.date,tabindex:je.value===!0?0:-1,class:{"q-calendar-task__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":r.current===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":je.value===!0},disabled:r.disabled,onKeydown:B=>{r.disabled!==!0&&De(B,[13,32])&&(B.stopPropagation(),B.preventDefault())},onKeyup:B=>{r.disabled!==!0&&De(B,[13,32])&&(h.value=r.date,X.value.onClickDate!==void 0&&n("click-date",{scope:b}))},...He("-date",(B,P)=>((P==="click-date"||P==="contextmenu-date")&&(h.value=r.date,P==="click-date"&&B.preventDefault()),{scope:b,event:B}))};return e.noAria!==!0&&(S.ariaLabel=l.value(r)),k?k({scope:b}):zn(e,S,v?v({scope:b}):s)}function Lt(r){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&ae(r),e.noDefaultHeaderBtn!==!0&&re(r)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?_("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ae(r),e.noDefaultHeaderBtn!==!0&&re(r)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?_("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ae(r),e.noDefaultHeaderBtn!==!0&&re(r)]):_("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ae(r),e.noDefaultHeaderBtn!==!0&&re(r)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?_("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&re(r),e.noDefaultHeaderText!==!0&&ae(r)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?_("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&re(r),e.noDefaultHeaderText!==!0&&ae(r)]):_("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&re(r),e.noDefaultHeaderText!==!0&&ae(r)])}function $t(r,i,s){const v=t["title-day"],k=K(ee.value),b={width:k,minWidth:k,maxWidth:k},T={timestamp:r,title:i,index:s,cellWidth:ee.value},S=typeof e.dayClass=="function"?e.dayClass({scope:T}):{},B=e.focusable===!0&&e.focusType.includes("day");return _("div",{class:{"q-calendar-task__title--day":!0,...S,...ge(r),"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":B===!0},style:b},[v&&v({scope:T}),ye()])}function Ut(r){const i=t["head-day"],s=t["head-date"],v=e.noActiveDate!==!0&&Ne(r),k={timestamp:r,activeDate:v,droppable:F.value=r.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1},b=e.weekdayStyle||ue,T=typeof e.weekdayClass=="function"?e.weekdayClass({scope:k}):{},S=K(ee.value),B={width:S,minWidth:S,maxWidth:S,...b({scope:k})},P=r.date,U={key:P,ref:O=>{C.value[P]=O},tabindex:Se.value===!0?0:-1,class:{"q-calendar-task__head--day":!0,...T,...ge(r),"q-active-date":v,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":Se.value===!0},style:B,onFocus:O=>{Se.value===!0&&(y.value=P)},onKeydown:O=>{r.disabled!==!0&&De(O,[13,32])&&(O.stopPropagation(),O.preventDefault())},onKeyup:O=>{r.disabled!==!0&&De(O,[13,32])&&(h.value=r.date)},...He("-head-day",O=>({scope:k,event:O})),onDragenter:O=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(O,"head-day",k)===!0?F.value=r.date:F.value="")},onDragover:O=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(O,"head-day",k)===!0?F.value=r.date:F.value="")},onDragleave:O=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(O,"head-day",k)===!0?F.value=r.date:F.value="")},onDrop:O=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(O,"head-day",k)===!0?F.value=r.date:F.value="")}};return _("div",U,[i!==void 0&&i({scope:k}),i===void 0&&Lt(r),i===void 0&&s&&s({scope:k}),ye()])}function zt(){return J.value.map(r=>Ut(r))}function Pt(r,i){return J.value.map(s=>$t(s,r,i))}function Kt(){return _("div",{class:{"q-calendar-task__head--days":!0}},[...zt()])}function Yt(r,i){return _("div",{class:{"q-calendar-task__title--days":!0}},[...Pt(r,i)])}function jt(){return _("div",{roll:"presentation",class:{"q-calendar-task__head":!0,"q-calendar__sticky":ne.value===!0},style:{}},[_("div",{style:{position:"relative",display:"flex"}},[Bt(),Kt()]),e.modelTitle.map((r,i)=>_("div",{class:"q-calendar-task__title",style:{position:"relative",display:"flex"}},[It(r,i),Yt(r,i)]))])}function Qt(){return _("div",{class:"q-calendar-task__body"},[Zt()])}function Zt(){return _("div",{ref:d,class:{"q-calendar-task__scroll-area":!0,"q-calendar__scroll":!0}},[xt()])}function Xt(){const{start:r,end:i}=vt.value;f.value=r.date,c.value=i.date;const s=N.width>0,v=tt(_("div",{key:f.value,class:"q-calendar-task"},[s===!0&&Qt()]),[[Le,mt]]);if(e.animated===!0){const k="q-calendar--"+(u.value==="prev"?e.transitionPrev:e.transitionNext);return _(en,{name:k,appear:!0},()=>v)}return v}return a({prev:Dt,next:bt,move:Ee,moveToToday:wt,updateCurrent:G}),()=>_t()}});const Qn={},Zn={class:"row justify-center"},Xn={class:"q-pa-md q-gutter-sm row"};function Gn(e,t){return nn(),an("div",Zn,[rn("div",Xn,[We(Be,{"no-caps":"",class:"button",style:{margin:"2px"},onClick:t[0]||(t[0]=n=>e.$emit("today"))},{default:Oe(()=>[xe(" Today ")]),_:1}),We(Be,{"no-caps":"",class:"button",style:{margin:"2px"},onClick:t[1]||(t[1]=n=>e.$emit("prev"))},{default:Oe(()=>[xe(" < Prev ")]),_:1}),We(Be,{"no-caps":"",class:"button",style:{margin:"2px"},onClick:t[2]||(t[2]=n=>e.$emit("next"))},{default:Oe(()=>[xe(" Next > ")]),_:1})])])}var ra=tn(Qn,[["render",Gn]]);export{Mn as A,Nn as B,jn as C,H as D,Ln as E,Kn as F,ye as G,An as H,zn as I,K as J,Sn as K,ft as L,Te as M,ra as N,ke as O,On as P,aa as Q,Le as R,fn as S,ea as T,L as a,ta as b,bn as c,_e as d,Me as e,gn as f,Ce as g,pn as h,Tn as i,q as j,E as k,Vn as l,na as m,Bn as n,Yn as o,j as p,Pn as q,Rn as r,me as s,se as t,fe as u,Ve as v,Un as w,In as x,Wn as y,R as z};
